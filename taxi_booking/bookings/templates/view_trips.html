{% extends 'base.html' %}

{% block title %}View Trips{% endblock %}

{% block content %}
<body class="body-container">
    <h1 class="heading-primary">View Trips</h1>
    <form method="post" class="form-container">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">View Trips</button>
    </form>

    {% if current_time %}
        <h2 class="heading-secondary">Trips as of {{ current_time }}</h2>
        {% if trips %}
            <table class="trip-table">
                <tr>
                    <th>Taxi ID</th>
                    <th>Taxi Location</th>  
                    <th>Customer</th>
                    <th>Pickup Point</th>
                    <th>Drop Point</th>
                    <th>Pickup Time</th>
                    <th>Drop Time</th>
                    <th>Fare Amount</th>
                    <th>Status</th>
                </tr>
                {% for trip in trips %}
                    <tr>
                        <td data-label="Taxi ID">{{ trip.taxi.taxi_id }}</td>
                        <td data-label="Taxi Location">{{ trip.taxi_location }}</td>
                        <td data-label="Customer">{{ trip.customer.customer_name }}</td>
                        <td data-label="Pickup Point">{{ trip.pickup_point }}</td>
                        <td data-label="Drop Point">{{ trip.drop_point }}</td>
                        <td data-label="Pickup Time">{{ trip.pickup_time }}</td>
                        <td data-label="Drop Time">{{ trip.drop_time }}</td>
                        <td data-label="Fare Amount">{{ trip.fare_amount }}</td>
                        <td data-label="Status">{{ trip.status }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <p class="no-trips-message">No trips found for the specified time.</p>
        {% endif %}
    {% endif %}
</body>
{% endblock %}
